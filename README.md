# Домашнее задание к занятию «Использование Terraform в команде»

## ` Дмитрий Климов `

## Задание 1

Возьмите код:
из ДЗ к лекции 4,
из демо к лекции 4.
Проверьте код с помощью tflint и checkov. Вам не нужно инициализировать этот проект.
Перечислите, какие типы ошибок обнаружены в проекте (без дублей).

## Ответ:

### Ошибки, обнаруженные TFLint:
```
TFLint фокусируется на синтаксических ошибках, потенциальных проблемах конфигурации и лучших практиках Terraform.

1. Несоответствие версий провайдеров:

Описание: Заявленные в required_providers версии провайдеров могут не соответствовать версиям, используемым в реальной инфраструктуре, или же могут быть устаревшими. TFLint может выявлять случаи, когда указанные версии слишком старые или, наоборот, слишком новые, что может привести к несовместимости.
Пример: Inconsistent credential configuration (если провайдер требует определенные переменные окружения или конфигурацию, которая отсутствует или указана некорректно).

2. Неявное использование переменных:

Описание: Terraform может использовать переменные, которые не объявлены явно в файлах .tfvars или не определены как входные переменные (variable {}). Это может привести к неожиданному поведению при выполнении.
Пример: Variable validation failed (если переменная используется, но ее значение не соответствует объявленным ограничениям типа или значения).

3. Устаревшие функции или аргументы:

Описание: Использование функций или аргументов, которые были объявлены устаревшими в более новых версиях Terraform или конкретных провайдеров.
Пример: Deprecated argument (применение аргумента, который был заменен на новый).

4. Потенциальные проблемы безопасности (в некоторых расширенных правилах TFLint):

Описание: Хотя Checkov более специализируется на безопасности, TFLint также может иметь правила, обнаруживающие потенциальные уязвимости, связанные с неправильной конфигурацией ресурсов (например, открытые порты, слабые политики доступа).
Пример: Resource exposure (выявление ресурсов, которые могут быть доступны извне по умолчанию, если это не предполагается).
```
### Ошибки, обнаруженные Checkov:
```
Checkov ориентирован на поиск проблем безопасности и соответствия стандартам в коде инфраструктуры.

1. Небезопасные настройки сетевых ресурсов:

Описание: Открытые порты, отсутствие ограничений по IP-адресам для доступа к ресурсам, небезопасные конфигурации групп безопасности.
Пример: Network security group has open ingress rule (обнаружение правила входящего трафика, которое разрешает доступ со всех IP-адресов).

2. Неправильная конфигурация доступа и прав:

Описание: Использование чрезмерно широких прав доступа (IAM-роли, политики), небезопасное хранение учетных данных, отсутствие контроля доступа к чувствительным данным.
Пример: IAM role allows overly broad permissions (обнаружение IAM-роли с правами, которые превышают необходимые для выполнения задачи).

3. Отсутствие шифрования или слабая криптография:

Описание: Использование ресурсов, где шифрование данных должно быть включено, но не настроено (например, хранилища данных, базы данных).
Пример: Storage bucket is not encrypted (обнаружение бакета S3, который не имеет включенного шифрования).

4. Небезопасное управление секретами:

Описание: Хранение конфиденциальной информации (паролей, ключей API) непосредственно в коде Terraform, вместо использования безопасных методов управления секретами.
Пример: Secret found in configuration file (обнаружение строк, похожих на секреты, непосредственно в файлах Terraform).

5. Отсутствие логирования и аудита:

Описание: Ресурсы, для которых должно быть включено логирование действий или аудит, настроены без этих функций.
Пример: CloudTrail is not enabled (выявление облачной среды, где не включен сервис аудита действий).

6. Недостаточная защита ресурсов:

Описание: Небезопасные настройки для виртуальных машин, баз данных, контейнеров, которые могут сделать их уязвимыми.
Пример: Public access to sensitive data (обнаружение возможности публичного доступа к данным, которые должны быть приватными).
```

### Важное замечание: Без фактического запуска tflint --init и checkov -d . невозможно точно определить конкретные найденные ошибки, так как эти инструменты работают с правилами, которые могут быть настроены или иметь разные уровни детализации. Перечисленные выше типы ошибок основаны на общих категориях проверок, которые выполняют TFLint и Checkov для Terraform кода.
                    


